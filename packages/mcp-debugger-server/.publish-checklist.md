# Pre-Publish Checklist

Use this checklist before publishing to NPM. Check off each item as you complete it.

## Pre-Flight Checks

### Code Quality
- [ ] All tests passing: `yarn test`
- [ ] E2E tests passing: `yarn test:e2e`
- [ ] Code coverage â‰¥90%: `yarn test:coverage`
- [ ] No linting errors: `yarn lint`
- [ ] No TypeScript errors: `yarn build`
- [ ] No uncommitted changes: `git status`

### Documentation
- [ ] README.md updated with new features
- [ ] API.md updated if API changed
- [ ] CHANGELOG.md updated with version changes
- [ ] Breaking changes documented (if any)
- [ ] Migration guide created (if breaking changes)
- [ ] Examples updated

### Version Management
- [ ] Version number updated in package.json
- [ ] Version follows semantic versioning
- [ ] Git tag created: `git tag v1.x.x`
- [ ] On main/master branch
- [ ] Latest code pulled: `git pull`

### Package Configuration
- [ ] package.json metadata correct
- [ ] Keywords updated
- [ ] Dependencies up to date
- [ ] Peer dependencies correct
- [ ] Files array includes all necessary files
- [ ] .npmignore excludes test files

### Build Verification
- [ ] Clean build: `yarn clean && yarn build`
- [ ] Package contents verified: `npm pack --dry-run`
- [ ] No unnecessary files in package
- [ ] Dist files are up to date
- [ ] Source maps generated (if applicable)

### Security
- [ ] No secrets in code
- [ ] No API keys in package
- [ ] Dependencies audited: `npm audit`
- [ ] No high/critical vulnerabilities
- [ ] 2FA enabled on NPM account

## Publishing

### Manual Publish
- [ ] Logged into NPM: `npm whoami`
- [ ] Core package dry run: `cd packages/mcp-debugger-core && npm publish --dry-run`
- [ ] Server package dry run: `cd packages/mcp-debugger-server && npm publish --dry-run`
- [ ] Published core: `cd packages/mcp-debugger-core && npm publish --access public`
- [ ] Published server: `cd packages/mcp-debugger-server && npm publish --access public`
- [ ] Correct tag used (latest/beta/next)

### Automated Publish (Recommended)
- [ ] From root: `npm run publish:debugger:check`
- [ ] Or just publish: `npm run publish:debugger`

### Automated Publish
- [ ] NPM_TOKEN secret configured in GitHub
- [ ] GitHub Actions workflow enabled
- [ ] Git tag pushed: `git push --tags`
- [ ] GitHub release created
- [ ] Workflow completed successfully

## Post-Publish Verification

### Installation Testing
- [ ] Package visible on npmjs.com
- [ ] Installation works: `npm install @ai-capabilities-suite/mcp-debugger-server`
- [ ] CLI works: `npx ts-mcp-server --version`
- [ ] Programmatic import works
- [ ] All exported APIs accessible

### Documentation
- [ ] README badges updated (if using)
- [ ] Installation instructions verified
- [ ] Links work (GitHub, NPM, docs)
- [ ] Examples work with new version

### Communication
- [ ] GitHub release notes published
- [ ] CHANGELOG.md committed
- [ ] Announcement made (if major release)
- [ ] Dependencies updated in dependent projects
- [ ] Team notified

## Rollback Plan (If Needed)

If something goes wrong:

```bash
# Unpublish within 72 hours (use sparingly!)
npm unpublish @ai-capabilities-suite/mcp-debugger-server@1.x.x

# Or deprecate the version
npm deprecate @ai-capabilities-suite/mcp-debugger-server@1.x.x "Reason for deprecation"

# Publish fixed version
npm version patch
npm publish
```

## Notes

- **First publish**: Must use `--access public` flag
- **Semantic versioning**: MAJOR.MINOR.PATCH
- **NPM tags**: latest (default), beta, next, alpha
- **Unpublish**: Only within 72 hours, use sparingly
- **Deprecate**: Preferred over unpublish for older versions

## Quick Commands

```bash
# Version bump
npm version patch|minor|major

# Build and test
yarn clean && yarn build && yarn test

# Verify package
npm pack --dry-run

# Publish
npm publish [--tag beta]

# Verify
npm info @ai-capabilities-suite/mcp-debugger-server

# Test install
npm install @ai-capabilities-suite/mcp-debugger-server
npx ts-mcp-server --version
```

## Resources

- [PUBLISHING.md](./PUBLISHING.md) - Full publishing guide
- [NPM-SETUP-GUIDE.md](./NPM-SETUP-GUIDE.md) - Quick setup guide
- [Semantic Versioning](https://semver.org/)
- [NPM Documentation](https://docs.npmjs.com/)

---

**Last Updated**: 2024
**Package**: @ai-capabilities-suite/mcp-debugger-server
